name: Release

on:
  push:
    tags: [ '**' ]

permissions:
  contents: read

jobs:
  ubuntu:
    uses: 9506hqwy/actions/.github/workflows/rust-release-ubuntu.yml@main
    with:
      use-submodules: true

  windows:
    uses: 9506hqwy/actions/.github/workflows/rust-release-windows.yml@main
    with:
      use-submodules: true

  release:

    needs: [ubuntu, windows]

    permissions:
      contents: write

    uses: 9506hqwy/actions/.github/workflows/common-create-release.yml@main
    with:
      title-prefix: v
      use-submodules: true
